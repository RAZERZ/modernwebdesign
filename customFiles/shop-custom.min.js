/*-- Defining global vars and functions --*/

var catNavBar = document.getElementsByClassName("block category-tree-block block-105 category-menu-block menu-block category")[0];
var documentBody = document.body;

/* -- Functions to happen on scroll --*/

function resizeTopMenuOnScroll () {
    var currentYCord = window.pageYOffset;
    var resizeOn = 120;
    var shopLogo = document.getElementById("shop-logo");
    var logoHref = document.getElementById("home");
    var navBar = document.getElementsByClassName("region first-region has-ace-text-block")[0];

    if(currentYCord > resizeOn) {
        shopLogo.setAttribute("style", "width: 250px;");
        logoHref.setAttribute("style", "margin-left: 3%; width: 250px;     -webkit-transform: translateX(0%); -moz-transform: translateX(0%); -ms-transform: translateX(0%); -o-transform: translateX(0%); transform: translateX(0%);");
        navBar.style.background = "rgba(0,0,0,.75)";
        navBar.style.height = "60px";
        catNavBar.style.marginTop = "40px";
    }
    else {
        shopLogo.removeAttribute("style");
        logoHref.removeAttribute("style");
        navBar.style.background = "rgba(0,0,0,.85)";
        navBar.style.height = "80px";
        catNavBar.style.marginTop = "60px";
    }
}

window.addEventListener("scroll", resizeTopMenuOnScroll);

/*-- For category menu --*/

var dropDownMenu = document.getElementsByClassName("menu menu-level-2")[0];
var dropDownMenuAd = document.createElement("li");
var dropDownMenuAdHref = document.createElement("a");
var dropDownMenuAdText = document.createTextNode("Lägg in reklam här");

dropDownMenuAd.className = "menu-item menu-level-2-item dropDownMenuAd";
dropDownMenuAd.appendChild(dropDownMenuAdHref);
dropDownMenuAdHref.appendChild(dropDownMenuAdText);
dropDownMenuAdHref.style.cssText = "color: black !important;";
dropDownMenu.appendChild(dropDownMenuAd);

/*-- For search button and its functions --*/

var searchBtnDiv = document.createElement("div");
var searchBtnText = document.createTextNode("Sök");
var searchBox = document.getElementsByClassName("block search-block block-91 searchfield")[0];

searchBtnDiv.className = "searchBtnToggle";
searchBtnDiv.appendChild(searchBtnText);
catNavBar.insertBefore(searchBtnDiv, searchBox);
searchBtnDiv.addEventListener("click", toggleSearchBar);

function toggleSearchBar() {
    if(searchBox.getAttribute("style") === null) {
        searchBox.setAttribute("style", "    visibility: visible;\n" +
            "    opacity: 1;\n" +
            "    -webkit-transform: translateY(0%);\n" +
            "    -moz-transform: translateY(0%);\n" +
            "    -ms-transform: translateY(0%);\n" +
            "    -o-transform: translateY(0%);\n" +
            "    transform: translateY(0%);\n" +
            "    -webkit-transition: s, 0s, 0.3s;\n" +
            "    -moz-transition: s, 0s, 0.3s;\n" +
            "    -ms-transition: s, 0s, 0.3s;\n" +
            "    -o-transition: s, 0s, 0.3s;\n" +
            "    transition: s, 0s, 0.3s;");
    }
    else {
        searchBox.removeAttribute("style");
    }
}

/*-- Lightswitch --*/

var lightSwitch = document.getElementsByClassName("modeSwitcher")[0];
var lightSwitchSpan = document.getElementsByClassName("modeSwitcherSpan")[0];

lightSwitch.addEventListener("click", lightSwitchToggle);

function lightSwitchToggle() {
    if(documentBody.getAttribute("style") === null) {
        documentBody.setAttribute("style", "color: white; background: #212121;");
        lightSwitch.className = "block ace-text-block block-94 modeSwitcher dark";
        lightSwitchSpan.innerHTML = "Dagläge";
    }
    else {
        documentBody.removeAttribute("style");
        lightSwitch.className = "block ace-text-block block-94 modeSwitcher light";
        lightSwitchSpan.innerHTML = "Nattläge";
    }
}