var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){var t,e;t=this,e=function(){var d={name:"mustache.js",version:"0.7.2",tags:["{{","}}"]};d.Scanner=P,d.Context=a,d.Writer=t;var w=/\s*/,b=/\s+/,r=/\S/,k=/\s*=/,_=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/,i=RegExp.prototype.test,e=Object.prototype.toString;function U(t){return e=r,n=t,!i.call(e,n);var e,n}var y=Array.isArray||function(t){return"[object Array]"===e.call(t)};function E(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function P(t){this.string=t,this.tail=t,this.pos=0}function a(t,e){this.view=t,this.parent=e,this._cache={}}function t(){this.clearCache()}function C(t){return[new RegExp(E(t[0])+"\\s*"),new RegExp("\\s*"+E(t[1]))]}d.escape=function(t){return String(t).replace(/[&<>"'\/]/g,function(t){return n[t]})},P.prototype.eos=function(){return""===this.tail},P.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},P.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return e},a.make=function(t){return t instanceof a?t:new a(t)},a.prototype.push=function(t){return new a(t,this)},a.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."==t)e=this.view;else for(var n=this;n;){if(0<t.indexOf(".")){e=n.view;for(var r=t.split("."),i=0;e&&i<r.length;)e=e[r[i++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},t.prototype.clearCache=function(){this._cache={},this._partialCache={}},t.prototype.compile=function(t,e){var n=this._cache[t];if(!n){var r=d.parse(t,e);n=this._cache[t]=this.compileTokens(r,t)}return n},t.prototype.compilePartial=function(t,e,n){var r=this.compile(e,n);return this._partialCache[t]=r},t.prototype.getPartial=function(t){return t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t)),this._partialCache[t]},t.prototype.compileTokens=function(r,i){var o=this;return function(t,e){if(e)if("function"==typeof e)o._loadPartial=e;else for(var n in e)o.compilePartial(n,e[n]);return function t(e,n,r,i){var o="";var a,s,c;for(var l=0,u=e.length;l<u;++l)switch(a=e[l],s=a[1],a[0]){case"#":if("object"===(void 0===(c=r.lookup(s))?"undefined":_typeof(c)))if(y(c))for(var p=0,f=c.length;p<f;++p)o+=t(a[4],n,r.push(c[p]),i);else c&&(o+=t(a[4],n,r.push(c),i));else if("function"==typeof c){var h=null==i?null:i.slice(a[3],a[5]);null!=(c=c.call(r.view,h,function(t){return n.render(t,r)}))&&(o+=c)}else c&&(o+=t(a[4],n,r,i));break;case"^":(!(c=r.lookup(s))||y(c)&&0===c.length)&&(o+=t(a[4],n,r,i));break;case">":"function"==typeof(c=n.getPartial(s))&&(o+=c(r));break;case"&":null!=(c=r.lookup(s))&&(o+=c);break;case"name":null!=(c=r.lookup(s))&&(o+=d.escape(c));break;case"text":o+=s}return o}(r,o,a.make(t),i)}},t.prototype.render=function(t,e,n){return this.compile(t)(e,n)},d.parse=function(t,e){if(t=t||"","string"==typeof(e=e||d.tags)&&(e=e.split(b)),2!==e.length)throw new Error("Invalid tags: "+e.join(", "));var n,r,i,o,a,s=C(e),c=new P(t),l=[],u=[],p=[],f=!1,h=!1;function y(){if(f&&!h)for(;p.length;)delete u[p.pop()];else p=[];h=f=!1}for(;!c.eos();){if(n=c.pos,i=c.scanUntil(s[0]))for(var m=0,v=i.length;m<v;++m)U(o=i.charAt(m))?p.push(u.length):h=!0,u.push(["text",o,n,n+1]),n+=1,"\n"==o&&y();if(!c.scan(s[0]))break;if(f=!0,r=c.scan(x)||"name",c.scan(w),"="===r?(i=c.scanUntil(k),c.scan(k),c.scanUntil(s[1])):"{"===r?(i=c.scanUntil(new RegExp("\\s*"+E("}"+e[1]))),c.scan(_),c.scanUntil(s[1]),r="&"):i=c.scanUntil(s[1]),!c.scan(s[1]))throw new Error("Unclosed tag at "+c.pos);if(a=[r,i,n,c.pos],u.push(a),"#"===r||"^"===r)l.push(a);else if("/"===r){if(0===l.length)throw new Error('Unopened section "'+i+'" at '+n);var g;if((g=l.pop())[1]!==i)throw new Error('Unclosed section "'+g[1]+'" at '+n)}else if("name"===r||"{"===r||"&"===r)h=!0;else if("="===r){if(2!==(e=i.split(b)).length)throw new Error("Invalid tags at "+n+": "+e.join(", "));s=C(e)}}if(g=l.pop())throw new Error('Unclosed section "'+g[1]+'" at '+c.pos);return function(t){for(var e,n=[],r=n,i=[],o=0,a=t.length;o<a;++o)switch((e=t[o])[0]){case"#":case"^":i.push(e),r.push(e),r=e[4]=[];break;case"/":i.pop()[5]=e[2],r=0<i.length?i[i.length-1][4]:n;break;default:r.push(e)}return n}(u=function(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(n=e,r.push(e)));return r}(u))};var o=new t;return d.clearCache=function(){return o.clearCache()},d.compile=function(t,e){return o.compile(t,e)},d.compilePartial=function(t,e,n){return o.compilePartial(t,e,n)},d.compileTokens=function(t,e){return o.compileTokens(t,e)},d.render=function(t,e,n){return o.render(t,e,n)},d.to_html=function(t,e,n,r){var i=d.render(t,e,n);if("function"!=typeof r)return i;r(i)},d}(),"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&exports?module.exports=e:"function"==typeof define&&define.amd?define(e):t.Mustache=e,a.mustache=function(t,e,n){return Mustache.render(t,e,n)},a.fn.mustache=function(i,o){return a(this).map(function(t,e){var n=a.trim(a(e).html()),r=a.mustache(n,i,o);return a(a.trim(r)).get()})}}(jQuery);
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"function"==typeof require?e(require("jquery")):e(jQuery)}(function(p){"use strict";var s={escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},n=27,o=9,i=13,a=38,l=39,r=40;function u(e,t){var n=function(){},o=this,s={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:u.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:n,onSearchComplete:n,onSearchError:n,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,n){return-1!==e.value.toLowerCase().indexOf(n)},paramName:"query",transformResult:function(e){return"string"==typeof e?p.parseJSON(e):e},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};o.element=e,o.el=p(e),o.suggestions=[],o.badQueries=[],o.selectedIndex=-1,o.currentValue=o.element.value,o.intervalId=0,o.cachedResponse={},o.onChangeInterval=null,o.onChange=null,o.isLocal=!1,o.suggestionsContainer=null,o.noSuggestionsContainer=null,o.options=p.extend({},s,t),o.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},o.hint=null,o.hintValue="",o.selection=null,o.initialize(),o.setOptions(t)}u.utils=s,(p.Autocomplete=u).formatResult=function(e,t){var n=e.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),o="("+s.escapeRegExChars(t)+")";return n.replace(new RegExp(o,"gi"),"<strong>$1</strong>")},u.prototype={killerFn:null,initialize:function(){var e,t=this,n="."+t.classes.suggestion,o=t.classes.selected,s=t.options;t.element.setAttribute("autocomplete","off"),t.killerFn=function(e){0===p(e.target).closest("."+t.options.containerClass).length&&(t.killSuggestions(),t.disableKillerFn())},t.noSuggestionsContainer=p('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),t.suggestionsContainer=u.utils.createNode(s.containerClass),(e=p(t.suggestionsContainer)).appendTo(s.appendTo),"auto"!==s.width&&e.width(s.width),e.on("mouseover.autocomplete",n,function(){t.activate(p(this).data("index"))}),e.on("mouseout.autocomplete",function(){t.selectedIndex=-1,e.children("."+o).removeClass(o)}),e.on("click.autocomplete",n,function(){t.select(p(this).data("index"))}),t.fixPositionCapture=function(){t.visible&&t.fixPosition()},p(window).on("resize.autocomplete",t.fixPositionCapture),t.el.on("keydown.autocomplete",function(e){t.onKeyPress(e)}),t.el.on("keyup.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("blur.autocomplete",function(){t.onBlur()}),t.el.on("focus.autocomplete",function(){t.onFocus()}),t.el.on("change.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("input.autocomplete",function(e){t.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),0===e.options.minChars&&0===e.el.val().length&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(e){var t=this,n=t.options;p.extend(n,e),t.isLocal=p.isArray(n.lookup),t.isLocal&&(n.lookup=t.verifySuggestionsFormat(n.lookup)),n.orientation=t.validateOrientation(n.orientation,"bottom"),p(t.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var e=this,t=p(e.suggestionsContainer),n=t.parent().get(0);if(n===document.body||e.options.forceFixPosition){var o=e.options.orientation,s=t.outerHeight(),i=e.el.outerHeight(),a=e.el.offset(),l={top:a.top,left:a.left};if("auto"===o){var r=p(window).height(),u=p(window).scrollTop(),c=-u+a.top-s,g=u+r-(a.top+i+s);o=Math.max(c,g)===c?"top":"bottom"}if(l.top+="top"===o?-s:i,n!==document.body){var d,h=t.css("opacity");e.visible||t.css("opacity",0).show(),d=t.offsetParent().offset(),l.top-=d.top,l.left-=d.left,e.visible||t.css("opacity",h).hide()}"auto"===e.options.width&&(l.width=e.el.outerWidth()-2+"px"),t.css(l)}},enableKillerFn:function(){p(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){p(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.hide(),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this.el.val().length,n=this.element.selectionStart;return"number"==typeof n?n===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==r||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case n:t.el.val(t.currentValue),t.hide();break;case l:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case o:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case i:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case a:t.moveUp();break;case r:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case a:case r:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),0<t.options.deferRequestBy?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var e=this,t=e.options,n=e.el.val(),o=e.getQuery(n);e.selection&&e.currentValue!==o&&(e.selection=null,(t.onInvalidateSelection||p.noop).call(e.element)),clearInterval(e.onChangeInterval),e.currentValue=n,e.selectedIndex=-1,t.triggerSelectOnValidInput&&e.isExactMatch(o)?e.select(0):o.length<t.minChars?e.hide():e.getSuggestions(o)},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(e){var t,n=this.options.delimiter;return n?(t=e.split(n),p.trim(t[t.length-1])):e},getSuggestionsLocal:function(t){var e,n=this.options,o=t.toLowerCase(),s=n.lookupFilter,i=parseInt(n.lookupLimit,10);return e={suggestions:p.grep(n.lookup,function(e){return s(e,t,o)})},i&&e.suggestions.length>i&&(e.suggestions=e.suggestions.slice(0,i)),e},getSuggestions:function(o){var e,t,n,s,i=this,a=i.options,l=a.serviceUrl;a.params[a.paramName]=o,t=a.ignoreParams?null:a.params,!1!==a.onSearchStart.call(i.element,a.params)&&(p.isFunction(a.lookup)?a.lookup(o,function(e){i.suggestions=e.suggestions,i.suggest(),a.onSearchComplete.call(i.element,o,e.suggestions)}):(i.isLocal?e=i.getSuggestionsLocal(o):(p.isFunction(l)&&(l=l.call(i.element,o)),n=l+"?"+p.param(t||{}),e=i.cachedResponse[n]),e&&p.isArray(e.suggestions)?(i.suggestions=e.suggestions,i.suggest(),a.onSearchComplete.call(i.element,o,e.suggestions)):i.isBadQuery(o)?a.onSearchComplete.call(i.element,o,[]):(i.abortAjax(),s={url:l,data:t,type:a.type,dataType:a.dataType},p.extend(s,a.ajaxSettings),i.currentRequest=p.ajax(s).done(function(e){var t;i.currentRequest=null,t=a.transformResult(e,o),i.processResponse(t,o,n),a.onSearchComplete.call(i.element,o,t.suggestions)}).fail(function(e,t,n){a.onSearchError.call(i.element,o,e,t,n)}))))},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,n=t.length;n--;)if(0===e.indexOf(t[n]))return!0;return!1},hide:function(){var e=this,t=p(e.suggestionsContainer);p.isFunction(e.options.onHide)&&e.visible&&e.options.onHide.call(e.element,t),e.visible=!1,e.selectedIndex=-1,clearInterval(e.onChangeInterval),p(e.suggestionsContainer).hide(),e.signalHint(null)},suggest:function(){if(0!==this.suggestions.length){var o,e=this,t=e.options,s=t.groupBy,i=t.formatResult,a=e.getQuery(e.currentValue),l=e.classes.suggestion,n=e.classes.selected,r=p(e.suggestionsContainer),u=p(e.noSuggestionsContainer),c=t.beforeRender,g="";t.triggerSelectOnValidInput&&e.isExactMatch(a)?e.select(0):(p.each(e.suggestions,function(e,t){var n;s&&(g+=(n=t.data[s],o===n?"":'<div class="autocomplete-group"><strong>'+(o=n)+"</strong></div>")),g+='<div class="'+l+'" data-index="'+e+'">'+i(t,a)+"</div>"}),this.adjustContainerWidth(),u.detach(),r.html(g),p.isFunction(c)&&c.call(e.element,r),e.fixPosition(),r.show(),t.autoSelectFirst&&(e.selectedIndex=0,r.scrollTop(0),r.children("."+l).first().addClass(n)),e.visible=!0,e.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var e=p(this.suggestionsContainer),t=p(this.noSuggestionsContainer);this.adjustContainerWidth(),t.detach(),e.empty(),e.append(t),this.fixPosition(),e.show(),this.visible=!0},adjustContainerWidth:function(){var e,t=this.options,n=p(this.suggestionsContainer);"auto"===t.width&&(e=this.el.outerWidth()-2,n.width(0<e?e:300))},findBestHint:function(){var o=this.el.val().toLowerCase(),s=null;o&&(p.each(this.suggestions,function(e,t){var n=0===t.value.toLowerCase().indexOf(o);return n&&(s=t),!n}),this.signalHint(s))},signalHint:function(e){var t="",n=this;e&&(t=n.currentValue+e.value.substr(n.currentValue.length)),n.hintValue!==t&&(n.hintValue=t,n.hint=e,(this.options.onHint||p.noop)(t))},verifySuggestionsFormat:function(e){return e.length&&"string"==typeof e[0]?p.map(e,function(e){return{value:e,data:null}}):e},validateOrientation:function(e,t){return e=p.trim(e||"").toLowerCase(),-1===p.inArray(e,["auto","bottom","top"])&&(e=t),e},processResponse:function(e,t,n){var o=this,s=o.options;e.suggestions=o.verifySuggestionsFormat(e.suggestions),s.noCache||(o.cachedResponse[n]=e,s.preventBadQueries&&0===e.suggestions.length&&o.badQueries.push(t)),t===o.getQuery(o.currentValue)&&(o.suggestions=e.suggestions,o.suggest())},activate:function(e){var t,n=this,o=n.classes.selected,s=p(n.suggestionsContainer),i=s.find("."+n.classes.suggestion);return s.find("."+o).removeClass(o),n.selectedIndex=e,-1!==n.selectedIndex&&i.length>n.selectedIndex?(t=i.get(n.selectedIndex),p(t).addClass(o),t):null},selectHint:function(){var e=p.inArray(this.hint,this.suggestions);this.select(e)},select:function(e){this.hide(),this.onSelect(e)},moveUp:function(){var e=this;if(-1!==e.selectedIndex)return 0===e.selectedIndex?(p(e.suggestionsContainer).children().first().removeClass(e.classes.selected),e.selectedIndex=-1,e.el.val(e.currentValue),void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var t=this,n=t.activate(e);if(n){var o,s,i,a=p(n).outerHeight();o=n.offsetTop,i=(s=p(t.suggestionsContainer).scrollTop())+t.options.maxHeight-a,o<s?p(t.suggestionsContainer).scrollTop(o):i<o&&p(t.suggestionsContainer).scrollTop(o-t.options.maxHeight+a),t.options.preserveInput||t.el.val(t.getValue(t.suggestions[e].value)),t.signalHint(null)}},onSelect:function(e){var t=this,n=t.options.onSelect,o=t.suggestions[e];t.currentValue=t.getValue(o.value),t.currentValue===t.el.val()||t.options.preserveInput||t.el.val(t.currentValue),t.signalHint(null),t.suggestions=[],t.selection=o,p.isFunction(n)&&n.call(t.element,o)},getValue:function(e){var t,n,o=this.options.delimiter;return o?1===(n=(t=this.currentValue).split(o)).length?e:t.substr(0,t.length-n[n.length-1].length)+e:e},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),this.disableKillerFn(),p(window).off("resize.autocomplete",this.fixPositionCapture),p(this.suggestionsContainer).remove()}},p.fn.autocomplete=p.fn.devbridgeAutocomplete=function(n,o){var s="autocomplete";return 0===arguments.length?this.first().data(s):this.each(function(){var e=p(this),t=e.data(s);"string"==typeof n?t&&"function"==typeof t[n]&&t[n](o):(t&&t.dispose&&t.dispose(),t=new u(this,n),e.data(s,t))})}});
!function(t){var L=t(window);t.fn.visible=function(t,i,e){if(!(this.length<1)){var o=1<this.length?this.eq(0):this,r=o.get(0),n=L.width(),f=L.height(),h=(e=e||"both",!0!==i||r.offsetWidth*r.offsetHeight);if("function"==typeof r.getBoundingClientRect){var l=r.getBoundingClientRect(),g=0<=l.top&&l.top<f,u=0<l.bottom&&l.bottom<=f,s=0<=l.left&&l.left<n,c=0<l.right&&l.right<=n,a=t?g||u:g&&u,v=t?s||c:s&&c;if("both"===e)return h&&a&&v;if("vertical"===e)return h&&a;if("horizontal"===e)return h&&v}else{var b=L.scrollTop(),d=b+f,p=L.scrollLeft(),w=p+n,m=o.offset(),y=m.top,z=y+o.height(),B=m.left,C=B+o.width(),R=!0===t?z:y,j=!0===t?y:z,q=!0===t?C:B,H=!0===t?B:C;if("both"===e)return!!h&&j<=d&&b<=R&&H<=w&&p<=q;if("vertical"===e)return!!h&&j<=d&&b<=R;if("horizontal"===e)return!!h&&H<=w&&p<=q}}}}(jQuery);
!function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],o=n.length,a=window.console=window.console||{};o--;)a[e=n[o]]||(a[e]=t)}(),function(e,t){var n="beforeunloadSupported";t.localStorage&&t.localStorage.getItem&&t.localStorage.setItem&&!t.localStorage.getItem(n)&&(e(window).on("beforeunload",function(){t.localStorage.setItem(n,"yes")}),e(window).on("unload",function(){t.localStorage.getItem(n)||t.localStorage.setItem(n,"no")})),t.isBeforeunloadSupported=function(){return!!(t.localStorage&&t.localStorage.getItem&&t.localStorage.getItem(n)&&"yes"===t.localStorage.getItem(n))}}(jQuery,window),$.ajaxSetup({cache:!1}),window.sw={},sw.beforeunloadCalled=!1,sw.pageHasUnsavedChanges=!1,function(){sw.browser=navigator.userAgent,sw.isTouch="ontouchstart"in window||0<navigator.msMaxTouchPoints,sw.isMobile=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),sw.isIE=sw.browser.match(/msie/i)||sw.browser.match(/trident/i),sw.isIE11=/Trident.*rv[ :]*11\./.test(sw.browser),sw.isEdge=/Edge\//.test(sw.browser),sw.isChrome=/Chrome\//.test(sw.browser),sw.isSafari=/Safari\//.test(sw.browser),sw.isMac=0<=navigator.platform.toUpperCase().indexOf("MAC"),sw.isWin=0<=navigator.platform.toUpperCase().indexOf("WIN"),sw.isIos=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;var e=document.documentElement;e.className+=sw.browser.match(/firefox/i)?" firefox":"",e.className+=sw.isIE?" ie":"",e.className+=sw.browser.match(/msie/i)&&document.all&&!document.addEventListener?" lt-ie9":"",e.className+=sw.isIE11?" ie-11":"",e.className+=sw.isEdge?" edge":"",e.className+=sw.isChrome&&!sw.isEdge?" chrome":"",e.className+=sw.isSafari&&!sw.isChrome?" safari":"",e.className+=sw.isMac?" mac":"",e.className+=sw.isWin?" win":"",e.className+=sw.isIos?" ios":"",e.className+=sw.isTouch?" touch":" no-touch",e.className+=sw.isMobile?" mobile":" desktop"}(),$(document).ready(function(){sw.setupToggle(),sw.setupUrlValueRedirectorSelects(),sw.setupLinkConfirm(),$(window).on("beforeunload",function(){if(sw.beforeunloadCalled=!0,sw.pageHasUnsavedChanges)return warningPageHasUnsavedChangesText})}),sw.copyElementVal=function(e,t,n){e&&t&&e.length&&t.length&&(e.val()||n)&&t.val(e.val()).change()},sw.setHeights=function(a){$(window).load(function(){var e,t=[];for(e=0;e<a.length;e++){var n=a[e].outerHeight();t.push(n)}var o=Math.max.apply(Math,t);for(e=0;e<a.length;e++)a[e].css("min-height",o)})},$.fn.setAllToMaxHeight=function(){return this.height(Math.max.apply(this,$.map(this,function(e){return $(e).height()})))},sw.getQueryString=function(e,t){if(e){var n=decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return""===n&&t?t:n}return window.location.search},sw.getQueryParameters=function(e){e||(e=window.location.search.substr(1));for(var t=e.replace(/\+/g,"%20").split("&"),n={},o=0;o<t.length;o++)if(t[o].length){var a=t[o].split("=");void 0!==n[decodeURIComponent(a[0])]&&(a[0]=a[0].replace("%5B%5D","%5B"+o+"%5D")),n[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return n},sw.addUrlQueryString=function(e,t){var n=-1!==e.indexOf("?")?"&":"?";return e+n+t},sw.getUrlWithAddedParameters=function(e,t){return e||(e=window.location.pathname),$.isEmptyObject(t)?e:sw.addUrlQueryString(e,$.param(t))},sw.setCurrentUrl=function(e){history.replaceState({},"",e),sw.replaceRedirectUrls.findAndReplace()},sw.replaceRedirectUrls={findAndReplace:function(){$("a[data-replace-current-url], select[data-replace-current-url]").each(function(){var e=$(this);"A"===e.prop("nodeName")?sw.replaceRedirectUrls.replace(e,"href"):"SELECT"===e.prop("nodeName")&&e.find("option").each(function(){sw.replaceRedirectUrls.replace($(this),"value")})})},replace:function(e,t){var n=e.prop(t).split("?"),o=sw.getQueryParameters(n[1]);o.redirectUrl=sw.getUrlWithAddedParameters(null,sw.getQueryParameters()),e.prop(t,sw.getUrlWithAddedParameters(n[0],o))}},sw.ajaxRequest=function(e,t,a){a=a||{},$.ajax({type:e,url:t,data:a.data,timeout:void 0!==a.timeout?a.timeout:45e3,context:a.context,success:function(e){!a.expectResponse||e?a.onSuccess&&$.proxy(a.onSuccess,this)(e):alert(errorActionRequestFailedText)},error:function(e,t,n){var o=function(){console.error("Ajax request failed: "+t+" ["+e.status+" "+e.statusText+"]"),alert(errorActionRequestFailedText)};isBeforeunloadSupported()?sw.beforeunloadCalled||o():setTimeout(o,1e3),a.onError&&a.onError(e,t,n)},complete:a.onComplete})},sw.redirect=function(e,t){sw.pageHasUnsavedChanges=!1,t?window.location.replace(e):window.location.href=e},$.fn.filterFind=function(e){return this.filter(e).add(this.find(e))},sw.allInArray=function(e,n){if($.isArray(e)){if(!e.length)return!1;var o=!0;return $.each(e,function(e,t){if(-1===$.inArray(t,n))return o=!1}),o}return-1!==$.inArray(e,n)},$.fn.setupSelected=function(){return this.each(function(){var e=$(this),t=e.data("selected");void 0!==t&&""!==t&&(e.val(t),null!==t&&null===e.val()&&e.val(e.children().first().val()),e.trigger("selectedInit"))})},sw.setupToggle=function(){$(document).on("click","a[data-toggle], button[data-toggle]",function(e){e.preventDefault();var t=$(this);if(!t.hasClass("disabled")){var n=t.data("toggle"),o=$(n);o.length&&(t.filter("[data-toggle-hide-parent]").length&&t.parent().hide(),o.toggle(),o.find("input, select, textarea").first().focus())}}),$(document).on("change","[data-toggle]",function(){var e=$(this);if(!e.hasClass("disabled")){var t=$(e.data("toggle"));t.length&&t.toggle()}})},sw.setupUrlValueRedirectorSelects=function(){$("select[data-url-value-redirector]").change(function(){var e=$(this);e.val()&&sw.redirect(e.val())})},$.fn.swModal=function(e){var t=$.extend({content:"",maxWidth:"",type:"inline",margin:"",padding:"",complete:function(){}},e),o=this,s=30,a="",i="",r="",l="",c="",d="";function n(e){if(a=$('<div class="sw-modal-window"/>'),i=$('<div class="overlay"/>'),r=$('<div class="wrapper"/>'),l=$('<div class="content"/>'),c=$('<div class="main"/>'),d=$('<button type="button" class="close" title="Close">&times;</button>'),$(a).addClass(e.type),$(l).css("padding",e.margin),"video"===e.type)e.content=$("<iframe/>",{src:"//www.youtube.com/embed/"+function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&\?]*).*/);{if(t&&11==t[7].length)return t[7];alert("Incorrect youtube url")}}($(o).attr("href")),frameborder:0,allowfullscreen:""}),$(l).css("max-width",e.maxWidth),$(l).css("padding","40px "+e.margin+" "+e.margin);else if("iframe"===e.type)e.content=$("<iframe/>",{src:$(o).attr("href"),frameborder:0,allowfullscreen:""}),$(c).css("padding",e.padding);else if("img"===e.type){e.type="img",e.content=$("<img/>",{src:$(o).attr("href")});var t=new Image;t.src=$(o).attr("href");var n={width:t.width,height:t.height}}else $(l).css("max-width",e.maxWidth),$(c).css("padding",e.padding),$(o).data("modal-id")&&(e.content=$("#"+$(o).data("modal-id")).html());$(c).append(e.content),$(l).append(c).append(d),$(a).prepend(i),$(a).append(r).show(),$(r).append(l),$("body").append(a),$("html").css({overflow:"hidden"}),$(document).on("click",".sw-modal-window .close, .sw-modal-window .overlay, .sw-modal-window .wrapper",function(e){e.preventDefault(),$(this).closest(".sw-modal-window").fadeOut(function(){$(this).remove()}),$("html").css({overflow:""})}),$(".sw-modal-window .main *").click(function(e){e.stopPropagation()}),"img"===e.type?(u(n),$(window).on("resize",function(){u(n)})):"inline"===e.type&&(w(),$(window).on("resize",function(){w()})),e.complete.call(this)}function w(){var e=$(window).height(),t=e-2*s;$(".sw-modal-window .content").css("height",t+"px");var n=(e-$(".sw-modal-window .main").outerHeight())/2;$(".sw-modal-window .content").css("top",n+"px")}function u(e){var t=$(window).height(),n=$(".sw-modal-window img").width(),o=$(".sw-modal-window img").height(),a=(t-2*s)*(n/o);a>e.width&&(a=e.width),$(".sw-modal-window .content").css("height",o+"px"),$(".sw-modal-window .content").css("max-width",a+"px");var i=(t-(o=$(".sw-modal-window img").height()))/2;$(".sw-modal-window .content").css("top",i+"px")}$(this).hasClass("sw-modal-open")&&(t.content=$(this).html(),t.type="inline"),n(t)},$(".sw-modal-open").length&&$(".sw-modal-open").swModal(),$(".sw-modal-iframe").click(function(e){e.preventDefault(),$(this).swModal({type:"iframe"})}),$(".sw-modal-youtube").click(function(e){e.preventDefault(),$(this).swModal({type:"video"})}),$(".sw-modal-inline").click(function(e){e.preventDefault(),$(this).swModal({type:"inline"})}),$(".sw-modal").click(function(e){e.preventDefault(),$(this).swModal({type:"img"})}),Array.prototype.sortInts=function(){return this.sort(function(e,t){return t<e?1:e<t?-1:0})},sw.confirm=function(e,t,n,o){var a=$("#sw-confirm"),i=a.find(".sw-confirm-yes"),s=a.find(".sw-confirm-no");i.off("click"),s.off("click"),a.find(".sw-confirm-message").html(e),i.click(function(e){e.preventDefault(),"function"==typeof t&&t(o),a.removeClass("active"),$("html").css({overflow:""})}),s.click(function(e){e.preventDefault(),"function"==typeof n&&n(o),a.removeClass("active"),$("html").css({overflow:""})}),a.addClass("active"),$("html").css({overflow:"hidden"}),i.focus()},sw.setupLinkConfirm=function(){$("a[data-confirm]").click(function(e){e.preventDefault();var t=$(this);sw.confirm(t.data("confirm"),function(){sw.redirect(t.attr("href"))})})},sw.callFunction=function(e,t){for(var n=window,o=e.split("."),a=0,i=o.length;a<i&&n;a++)n=n[o[a]];if("function"==typeof n)return n(t)};
function setupPolyfills(){$.fn.placeholder&&$("input, textarea").placeholder()}function updateCartTmpl(e){var t=$("#cartTmpl").mustache(e);$(".cart-block").html(t),$(document).trigger("cartUpdate")}function setupCart(){$(document).on("click",".cart-block .remove-item-action",function(e){e.preventDefault();var t=$(this).closest(".cart-item");$(".checkout-block").length?removeCheckoutCartItem(t.data("idHash")):sw.ajaxRequest("POST",sw.getShopUrl("/cart/remove-item"),{data:{idHash:t.data("idHash")},expectResponse:!0,onSuccess:function(e){updateCartTmpl(e),$(".cart-content").show()}})})}function setupProductList(){$(".sort-by-select").change(function(){var o=$(this),e=o.closest(".block"),t={sortBy:o.val(),page:1};e.data("updateUrl")?(sw.setCurrentUrl(sw.getUrlWithAddedParameters(null,$.extend({},sw.getQueryParameters(),t))),t=$.extend({},sw.getQueryParameters(),t,{blockId:e.data("blockId")}),sw.ajaxRequest("GET",sw.getShopUrl(sw.getUrlWithAddedParameters(e.data("updateUrl"),t)),{expectResponse:!0,onSuccess:function(e){var t=$("#productListTmpl").mustache(e.productListTmplData);o.closest(".block").find(".products").html(t),$(".pagination").replaceWith(e.paginationHtml)}})):console.error("Update url missing")}),$(document).on("click",".add-to-cart-action",function(e){e.preventDefault();var t=$(this);t.data("sku")?t.closest(".block").hasClass("checkout-block")?addCheckoutCartItem(t.data("sku")):(t.loading(!0),sw.ajaxRequest("POST",sw.getShopUrl("/cart/add-item"),{data:{sku:t.data("sku")},expectResponse:!0,onSuccess:function(e){e.success?(updateCartTmpl(e.cartTmplData),$(".cart-block").trigger("cartItemAdded"),t.closest(".gallery-item").trigger("addedToCart")):console.error("Product couldn't be added to cart")},onComplete:function(){t.loading(!1)}})):console.error("SKU data is required for .add-product-to-cart")}),$(document).on("click",".copy-order-to-cart-action",function(e){e.preventDefault();var t=$(this);t.loading(!0),sw.ajaxRequest("POST",sw.getShopUrl("/customer/copy-order-to-cart"),{data:{orderId:t.data("order-id")},expectResponse:!0,onSuccess:function(e){e.success?(updateCartTmpl(e.cartTmplData),$(".cart-block").trigger("cartItemAdded")):console.error("Order items couldn't be copied to cart")},onComplete:function(){t.loading(!1)}})}),$(".gallery-layout a").click(function(e){if(e.preventDefault(),!$(this).hasClass("current")){$(this).siblings().removeClass("current"),$(this).addClass("current");var t="gallery-layout-"+$(this).data("layout");$(this).closest(".gallery-header").next().removeClass(function(e,t){return(t.match(/\bgallery-layout-\S+/g)||[]).join(" ")}).addClass(t),sw.ajaxRequest("POST",sw.getShopUrl("/index/set-selection"),{data:{productListGalleryLayout:$(this).data("layout")}})}})}function setupProductView(){function n(t){var o=[];return $(".attribute-value-select").each(function(){var e=$(this);t&&e.data("attributeId")==t||o.push(parseInt(e.val(),10))}),o}function a(o){if(o){var c=n();o.attributes=[],$.each(variantsDynamicViewData.allAttributesAndActiveValues,function(e,t){var s={};s.id=t.id,s.name=t.name,s.values=[];var i=n(t.id);$.each(t.values,function(e,t){var o,a,r=i.slice();if(r.push(t.id),o=r,a=!1,$.each(variantsDynamicViewData.activeVariantsAttributeValueIds,function(e,t){if(sw.allInArray(o,t))return!(a=!0)}),a){var n={};n.id=t.id,n.name=t.name,n.selected=-1!==$.inArray(t.id,c),s.values.push(n)}}),o.attributes.push(s)});var a=$(".dynamic-product-info"),e=a.find('input[name="quantity"], input[name^="orderData"]').serializeArray(),t=a.find(".klarna-widget"),r=$("#dynamicProductInfoTmpl").mustache(o);a.html(r),$.each(e,function(e,t){a.find('input[name="'+t.name+'"]').val(t.value)}),t.length&&a.find(".klarna-widget").replaceWith(t),$(document).trigger("productViewInfoUpdate")}else console.error("No variant template data part for view update")}$(document).on("submit",".add-to-cart-form",function(e){e.preventDefault();var o=$(this),t=o.find('button[type="submit"]').loading(!0);sw.ajaxRequest("POST",sw.getShopUrl("/cart/add-item"),{data:o.serialize(),expectResponse:!0,onSuccess:function(e){if(o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),e.success){o.find(':input[name^="orderData"]').val(""),updateCartTmpl(e.cartTmplData);var t=o.find(".product-status");t.find(".cart-item-count").text(e.newQuantity),t.show(),$(".cart-block").trigger("cartItemAdded")}else $.each(e.errors,function(e,t){sw.setFieldError(o,e,t)}),o.find(".error-field").first().focus()},onComplete:function(){t.loading(!1)}})}),$(document).on("change",".product-block .attribute-value-select",function(){var e=n();e.sortInts();var t=e.join("|");if(variantsDynamicViewData)if(variantsDynamicViewData.tmplDataParts[t])a(variantsDynamicViewData.tmplDataParts[t]);else{var o=$('.add-to-cart-form input[name="productId"]').val();sw.ajaxRequest("GET",sw.getShopUrl("/product/"+o+"/get-variant-dynamic-view-tmpl-data-part"),{data:{attributeValues:e},expectResponse:!0,onSuccess:function(e){a(e)}})}else console.error("Can't find dynamic view data")})}function loadTabContent(){var e;window.location.hash&&"#customer-info-form"==window.location.hash?((e=$('a[href^="'+window.location.hash+'"]')).hash=window.location.hash,toggleTab(e)):$('a[href="#customer-account"]').length&&((e=$('a[href^="#customer-account"]')).hash="#customer-account",toggleTab(e))}function toggleTab(e){$(e).parent().siblings().removeClass("current"),$(e).parent().addClass("current"),$(".customer-content").hide(),$(e.hash).show()}function setupCustomerPage(){$(".customer-info-block form").submit(function(){$(this).find("input, textarea").prop("disabled",!1)}),loadTabContent(),$(".customer-pages ul a").toggleTabContent(".customer-content")}function setupInStockNotifyModal(){$(document).on("click",".in-stock-notify",function(e){e.preventDefault();var t=$("#in-stock-notify-wrap"),o=t.find("h3"),r="/product/"+$(this).data("permalink")+"/"+$(this).data("variantId")+"/watch-stock",n=$(this).data("text-signed-up"),s=$(this).data("email");o.text($(this).data("variant-name")),$(this).swModal({type:"inline",max_width:600,content:t.html(),complete:function(){$(".add-to-in-stock-notify-button").click(function(){var o,e,t=$(this),a=t.closest(".in-stock-notify-modal");""!=s&&a.find("#in-stock-notify-email-field").val(s),a.data("watch-url",r),a.data("text-signed-up",n),o=a,(e=t).loading(!0),sw.ajaxRequest("POST",sw.getShopUrl(o.data("watch-url")),{data:{email:o.find("#in-stock-notify-email-field").val()},onSuccess:function(e){e.success?(o.closest(".sw-modal-window").addClass("in-stock-notify-signed-up"),o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),o.find("#in-stock-notify-email-field, .add-to-in-stock-notify-button").hide(),o.find(".in-stock-notify-info").hide(),o.find(".in-stock-notify-message").show(),$(".in-stock-notify").text(o.data("text-signed-up")).prop("disabled",!0)):(o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),$.each(e.errors,function(e,t){sw.setFieldError(o,e,t)}),o.find(".error-field").first().focus())},onComplete:function(){e.loading(!1)}})}),$(".in-stock-notify-modal #in-stock-notify-email-field").keypress(function(e){13===e.which&&(e.preventDefault(),$(".add-to-in-stock-notify-button").click())})}})})}sw.shop={onReady:function(){$(".newsletter-subscribe-button").on("click",this.newsletterSubscribe),$(".newsletter-email-field").on("keypress",this.detectEnterPress)},newsletterSubscribe:function(e){e.preventDefault();var t=$(this).prop("disabled",!0),o=t.closest(".newsletter-signup-block");sw.ajaxRequest("GET",sw.getShopUrl("/newsletter/subscribe"),{data:{email:o.find(".newsletter-email-field").val()},onSuccess:function(e){e.success?(o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),o.find(":input").val(""),o.find(".newsletter-email-field").val(e.msg)):(o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),$.each(e.errorMsgs,function(e,t){sw.setFieldError(o,e,t)}),o.find(".error-field").first().focus())},onComplete:function(){t.prop("disabled",!1)}})},detectEnterPress:function(e){13===e.which&&(e.preventDefault(),$(this).closest(".newsletter-signup-block").find(".newsletter-subscribe-button").click())}},$(document).ready(function(){$("select[data-selected]").setupSelected(),setupPolyfills(),setupCart(),setupProductList(),setupProductView(),setupCustomerPage(),setupInStockNotifyModal(),$("#supportMail").click(function(e){e.preventDefault();var t=$(this),o=t.closest("form");sw.ajaxRequest("POST",sw.getShopUrl("/customer-service/send-support-mail"),{data:o.serializeArray(),onSuccess:function(e){e.success?(o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),o.find(":input").val(""),$(".customer-form-feedback h2").text(e.successMsg),$(".customer-form-feedback").removeClass("hide"),o.hide()):e.errorMsgs&&(o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),$.each(e.errorMsgs,function(e,t){sw.setFieldError(o,e,t)}),o.find(".error-field").eq(0).focus())},onComplete:function(){t.loading(!1)}})}),$("#complaintMail, #returnMail").click(function(e){e.preventDefault();var t=$(this),o=t.closest("form"),a=sw.getShopUrl("/customer-service/"+t.closest("form").data("type")+"/send-return-complaint-mail");sw.ajaxRequest("POST",a,{data:o.serializeArray(),onSuccess:function(e){e.success?(o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),o.find(":input").val(""),$(".customer-form-feedback h2").text(e.successMsg),$(".customer-form-feedback").removeClass("hide"),o.hide()):e.errorMsgs&&(o.find("label.error").remove(),o.find(".error-field").removeClass("error-field"),$.each(e.errorMsgs,function(e,t){sw.setFieldError(o,e,t)}),o.find(".error-field").eq(0).focus())},onComplete:function(){t.loading(!1)}})}),sw.shop.onReady(),sw.selectLocale.init(),sw.selectList.onReady()}),$.fn.loading=function(t){return this.each(function(){var e=$(this);t?(e.prop("disabled",!0),e.addClass("loading")):(e.removeClass("loading"),e.prop("disabled",!1))})},sw.getShopUrl=function(e){return currentLangCode===primaryLangCode||currentLangCodeHasHostnameDefault||(e="/"+currentLangCode+e),e},sw.setFieldError=function(e,t,o){var a=e.find(':input[name="'+t+'"]').addClass("error-field"),r=$('<label for="'+a.attr("id")+'" class="error">'+o+"</label>");a.parent().hasClass("column-left")||a.parent().hasClass("column-right")?a.closest(".columns").after(r):a.parent().hasClass("checkbox")?a.parent().append(r):a.after(r)},function(t){t.fn.toggleTabContent=function(){return t(this).click(function(e){if(!t(this).is('[href^="#"]'))return!0;e.preventDefault(),toggleTab(this)}),t(this)}}(jQuery),sw.getFormattedCurrencyAmount=function(t){try{return t.toLocaleString(currentLangCode)}catch(e){try{return t.toLocaleString()}catch(e){}}return t.toString()},sw.getCurrencyThousandsSeparator=function(){return sw.getFormattedCurrencyAmount(1e3).match(/1(.*)000/)[1]},sw.atMedia={minWidth:function(e){return!!sw.atMedia.isSupported(e)&&window.innerWidth>e},maxWidth:function(e){return!!sw.atMedia.isSupported(e)&&window.innerWidth<e},isSupported:function(e){return void 0!==window.innerWidth&&!isNaN(parseFloat(e))&&isFinite(e)}},sw.selectLocale={init:function(){$(".select-locale-modal .currency-field").prop("disabled","disabled"),$(document).on("click",".select-locale-button",sw.selectLocale.showModal),$(document).on("change","#country-field",function(e){var t=$(this.options[e.target.selectedIndex]).data("country-selector");$(".select-locale-modal .currency-field").hide().prop("disabled","disabled"),t?$("#currency-field-"+t).show().prop("disabled",!1):$("#currency-field").show().prop("disabled",!1)})},showModal:function(){var e=$("#localeModalTmpl").mustache();e.find("select").setupSelected(),$(this).swModal({type:"inline",maxWidth:400,content:e,complete:function(){$(document).trigger("modalComplete"),$(".select-locale-modal-close-button").on("click",sw.selectLocale.closeModal)}})},closeModal:function(){$(".sw-modal-window .close").click()}},sw.selectList={onReady:function(){$(document).on("click touchend",".select-list-placeholder",this.showOptions),$(document).on("mouseenter",".desktop .select-list-options .select-list-option-text",this.optionTextMouseOver),$(document).on("mouseleave",".desktop .select-list-options .select-list-option-text",this.optionTextMouseOut),this.hideOnClickOutside()},showOptions:function(){$(this).closest(".select-list").toggleClass("select-list-show-options")},optionTextMouseOver:function(){$(this).parent().addClass("select-list-option-hover")},optionTextMouseOut:function(){$(this).parent().removeClass("select-list-option-hover")},hideOnClickOutside:function(e,t){$(document).on("click touchend",function(e){var t=$(".select-list");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("select-list-show-options")})}};
sw.categories={onReady:function(){$(document).on("click",".off-canvas-nav .category-tree-block .menu-item-has-children:not(.menu-item-has-children-loaded) .toggle-static-child-menu",this.loadCompleteCategoryTree),$(document).on("click",".desktop .off-canvas-nav .category-tree-block .menu-item-has-title-without-link:not(.menu-item-has-children-loaded) > .menu-title-has-children",this.loadCompleteCategoryTree),$(document).on("touchend",".touch .off-canvas-nav .category-tree-block .menu-item-has-title-without-link:not(.menu-item-has-children-loaded) > .menu-title-has-children",this.loadCompleteCategoryTree),$(document).on("click",".off-canvas-nav .category-tree-block .menu-item.menu-item-has-children-loaded .toggle-static-child-menu",this.toggleCompleteCategoryTree),$(document).on("click",".desktop .off-canvas-nav .category-tree-block .menu-item-has-title-without-link.menu-item.menu-item-has-children-loaded .menu-title-has-children",this.toggleCompleteCategoryTree),$(document).on("touchend",".touch .off-canvas-nav .category-tree-block .menu-item-has-title-without-link.menu-item.menu-item-has-children-loaded .menu-title-has-children",this.toggleCompleteCategoryTree),$(document).on("click","#page-container .sidebar .category-tree-block .menu-item-has-children:not(.menu-item-has-children-loaded) .menu-title-has-children",this.loadCategoryTree),$(document).on("click","#page-container .sidebar .category-tree-block .menu-item-has-children-loaded > .menu-title-has-children",this.toggleCategoryTree),$(document).on("mouseover","#page-container .category-tree-menu .menu-level-1-item.menu-item-has-children:not(.menu-item-has-children-loaded)",this.loadCompleteCategoryTree),$(".category-tree-block .menu-title.selected").each(function(){$(this).closest(".menu-level-1-item").addClass("menu-item-has-selected-child"),$(this).parents(".menu-item").addClass("menu-item-show-children")})},loadCategoryTree:function(){var a=$(this),o=a.data("id"),l=a.closest("nav");sw.ajaxRequest("GET",sw.getShopUrl("/category/"+a.data("id")+"/get-tmpl"),{expectResponse:!0,onSuccess:function(e){var t=$("#categoriesPartialTmpl").html(),n=$("#rootCategoriesTmpl").mustache(e,{categoriesPartial:t});a.closest("ul.category-menu").html(n).find("a + ul:visible").prev().addClass("open"),l.find(".menu-item-"+o).addClass("menu-item-has-children-loaded menu-item-show-children").parents(".category-menu .menu-item-has-children").addClass("menu-item-has-children-loaded menu-item-show-children")}})},loadCompleteCategoryTree:function(){var o=sw.categories.getMenuItem(this),l=o.find("> a"),i=!!$(this).closest(".off-canvas-nav").length;o.find("ul").length?o.toggleClass("open"):(o.addClass("menu-item-has-loading-children"),sw.ajaxRequest("GET",sw.getShopUrl("/category/"+l.data("id")+"/get-child-tree-tmpl"),{expectResponse:!0,onSuccess:function(e){var t=$("#categoriesPartialTmpl").html(),n=$("#rootCategoriesTmpl").mustache(e,{categoriesPartial:t}),a=$("<div/>").html(n).contents();i&&a.find(".load-tree").removeClass("open"),$ul=$("<ul>").append(a),o.addClass("open menu-item-has-children-loaded menu-item-show-children").removeClass("menu-item-has-loading-children").append($ul.addClass("menu menu-level-"+(o.data("level")+1))),l.addClass("open selected")}}))},toggleCategoryTree:function(){var e=sw.categories.getMenuItem(this);e.children("a").toggleClass("open"),e.toggleClass("open menu-item-show-children"),e.closest("li").toggleClass("current-menu-ancestor")},toggleCompleteCategoryTree:function(){var e=sw.categories.getMenuItem(this);e.toggleClass("open menu-item-show-children"),e.children("a").toggleClass("open"),e.toggleClass("current-menu-ancestor")},getMenuItem:function(e){return"li"!==$(e)[0].nodeName.toLowerCase()?$(e).closest("li"):$(e)}},$(document).ready(function(){sw.categories.onReady()});
$(document).ready(function(){$(".autocomplete").devbridgeAutocomplete({serviceUrl:sw.getShopUrl("/search/get-autocomplete-results"),dataType:"json",paramName:"q",minChars:2,transformResult:function(e){return{suggestions:$.map(e.searchResults,function(e){return{value:e.name,data:{url:e.url}}})}},onSelect:function(e){window.location.href=e.data.url}})});
"use strict";sw.productFilter={activeFilterIds:[],openFilterGroupIds:[],onReady:function(){$("#search-filter").length&&(this.loadActiveFilters(),$("#search-filter").on("change",'#filter-groups input:not(".filter-type-range")',this.onFilterChange),$("#search-filter").on("click",".filter-group-title",this.onGroupTitleClick),$("#search-filter").on("click",".remove-active-filter-action",this.onRemoveActiveFilterClick),$("#search-filter").on("click",".clear-active-filters-action",this.onClearActiveFiltersClick),$('[name="sortOrder"]').change(this.updateSortOrder))},loadActiveFilters:function(){var t=sw.getQueryParameters();$.each(t,function(t,i){$("#search-filter").find('[name="'+t+'"]').each(function(){var t=$(this),e=t.attr("id");if("checkbox"===t.attr("type"))t.prop("checked",!0);else{var r=i.split(sw.theme.options.productFilter.rangeSlider.input_values_separator);t.data({from:r[0],to:r[1],filterItemTitle:Math.round(sw.getFormattedCurrencyAmount(r[0]))+"-"+Math.round(sw.getFormattedCurrencyAmount(r[1]))}),sw.theme.createRangeSlider()}sw.productFilter.activeFilterIds.push(e),sw.productFilter.addToActiveFilters(t)})})},onFilterChange:function(){var t=$(this);t.is(":checked")?sw.productFilter.activateFilter(t):sw.productFilter.deactivateFilter(t)},activateFilter:function(t){var e=t.attr("id");if(t.is(".filter-type-boolean")){var r=t.closest(".filter-item").siblings().find("input");r.prop("checked",!1),sw.productFilter.deactivateFilter(r)}sw.productFilter.activeFilterIds.push(e),sw.productFilter.addToActiveFilters(t);var i=sw.productFilter.updateQueryParameters();sw.productFilter.updateProductListAndFilters(i)},deactivateFilter:function(t){var e=t.attr("id"),r=$('[data-active-filter-item-id="'+e+'"]');sw.productFilter.resetByActiveFilter(r);var i=sw.productFilter.updateQueryParameters();sw.productFilter.updateProductListAndFilters(i)},updateQueryParameters:function(r){var t,e=$("#search-filter"),i=$("#search-filter input").closest(".block"),a={},l=e.serializeArray(),s=void 0;return $.each(l,function(t,e){(r||"pr"!==e.name||sw.productFilter.isPriceRangeChanged(e.value))&&(a[e.name]=e.value)}),void 0!==(s=sw.getQueryParameters()).page&&delete s.page,a=$.extend({},s,a),t=sw.getUrlWithAddedParameters(null,a),sw.setCurrentUrl(t),$.extend({},s,a,{blockId:i.data("blockId")})},updateProductListAndFilters:function(t){var e=$("#search-filter input").closest(".block"),r=e.data("updateUrl"),i=sw.getUrlWithAddedParameters(r,t),a=sw.getShopUrl(i);$(".show-product-filter-loader .product-list").addClass("product-list-loading"),sw.ajaxRequest("GET",a,{expectResponse:!0,onSuccess:function(t){sw.productFilter.updateSearchFiltersFromTmplData(t.searchFiltersTmplData),sw.productFilter.updateProductListFromTmplData(t,e),$(".pagination").replaceWith(t.paginationHtml)},onComplete:function(){$(".product-list").removeClass("product-list-loading")}})},updateSearchFiltersFromTmplData:function(t){var r=$("#searchFiltersTmpl").mustache(t);$.each(sw.productFilter.activeFilterIds,function(t,e){$(r).find("#"+e).prop("checked",!0)}),$.each(sw.productFilter.openFilterGroupIds,function(t,e){$(r).siblings("#"+e).toggleClass("filter-group-open filter-group-closed")}),$('#filter-groups > li:not(".filter-group-price-range")').remove(),$("#filter-groups").append(r)},updateProductListFromTmplData:function(t,e){var r=$("#productListTmpl").mustache(t.productListTmplData),i=e.find(".products"),a=t.productListTmplData.products.length;i.html(r),$(".active-filters-match span").text(a),a&&i.removeClass("empty-block"),$(document).trigger("productListUpdate")},addToActiveFilters:function(t){var e=t.attr("id"),r=t.data("filterItemTitle"),i=!1,a=!1,l={},s=void 0;t.data("suffix")?r=r+" "+t.data("suffix"):t.data("prefix")&&(r=t.data("prefix")+" "+r),t.hasClass("filter-type-range")?i=!0:t.hasClass("filter-type-radio")&&(a=!0,e=t.data("filterItemId")),s=$('[data-active-filter-item-id="'+e+'"]'),a&&s.length?s.remove():i&&s.length?this.updateItemWithActiveRangeFilter(s,r):this.createActiveFilter(i,a,r,e),l[t.prop("name")]=t.val(),sw.setCurrentUrl(sw.getUrlWithAddedParameters(null,$.extend({},sw.getQueryParameters(),l))),sw.productFilter.updateActiveFiltersCount()},updateItemWithActiveRangeFilter:function(t,e){t.text(e)},createActiveFilter:function(t,e,r,i){var a=$(".active-filters"),l=$('<button type="button" class="remove-active-filter-action" />');t?l.addClass("active-filter-type-range"):e&&l.addClass("filter-type-radio"),l.text(r),l.attr("data-active-filter-item-id",i),a.find(".clear-active-filters-action").before(l)},onGroupTitleClick:function(){var t=$(this).closest(".filter-group");sw.productFilter.openFilterGroupIds=[],t.toggleClass("filter-group-open filter-group-closed"),$(".filter-group-open").each(function(){sw.productFilter.openFilterGroupIds.push($(this).attr("id"))})},onRemoveActiveFilterClick:function(){var t=$(this);sw.productFilter.resetByActiveFilter(t);var e=sw.productFilter.updateQueryParameters();sw.productFilter.updateProductListAndFilters(e)},onClearActiveFiltersClick:function(t){var e;t.preventDefault(),$(".remove-active-filter-action").each(function(){sw.productFilter.resetByActiveFilter($(this))}),sw.productFilter.openFilterGroupIds=[],e=sw.productFilter.updateQueryParameters(),sw.productFilter.updateProductListAndFilters(e)},removeFromActiveFilterIds:function(e){sw.productFilter.activeFilterIds=sw.productFilter.activeFilterIds.filter(function(t){return t!==e})},resetByActiveFilter:function(t){var e=t.data("activeFilterItemId"),r=sw.getQueryParameters();t.hasClass("active-filter-type-range")?sw.theme.resetRangeSlider(e):t.hasClass("filter-type-radio")?$('[name="'+e+'"]').prop("checked",!1):$("#"+e).prop("checked",!1),delete r[$("#"+e).prop("name")],sw.setCurrentUrl(sw.getUrlWithAddedParameters(null,r)),sw.productFilter.removeFromActiveFilterIds(e),sw.productFilter.updateActiveFiltersCount(),t.remove()},updateActiveFiltersCount:function(){var t=$(".remove-active-filter-action"),e=parseInt(t.length),r="";0<e&&(r=e),$("#active-filters-count").text(r),sw.productFilter.updateClassNames(e)},updateClassNames:function(t){0<t?$(".filter-header").addClass("has-active-filter-items"):$(".filter-header").removeClass("has-active-filter-items"),1<t?$(".active-filters").addClass("has-multiple-filter-items"):$(".active-filters").removeClass("has-multiple-filter-items")},isPriceRangeChanged:function(t){var e=$("#price-range-field"),r=t.split(",");return""!==t&&!(e.data("min")==parseFloat(r[0])&&e.data("max")==parseFloat(r[1]))},updateSortOrder:function(){$("#sort-by-select").val($(this).val()).change()}},$(document).ready(function(){sw.productFilter.onReady()});
sw.menu={init:function(){$(document).on("click",".menu-block a.no-link",this.preventLinkClick),$(document).on("click",".off-canvas-nav .dynamic-menu-item.has-children:not(.menu-item-has-children-loaded) .toggle-dynamic-child-menu,\n                                #content .dynamic-menu-item.has-children:not(.menu-item-has-children-loaded) .toggle-dynamic-child-menu,\n                                #site-footer .dynamic-menu-item.has-children:not(.menu-item-has-children-loaded) .toggle-dynamic-child-menu,\n                                .off-canvas-nav .dynamic-menu-item.no-link.has-children:not(.menu-item-has-children-loaded) .menu-title-has-children",this.loadDynamicNodeChildren),$(document).on("click",".off-canvas-nav .menu-item-has-children-loaded .toggle-dynamic-child-menu,\n                                #content .menu-item-has-children-loaded .toggle-dynamic-child-menu,\n                                #site-footer .menu-item-has-children-loaded .toggle-dynamic-child-menu,\n                                .off-canvas-nav .custom-menu-block .menu-item-has-children .toggle-static-child-menu,\n                                #content .custom-menu-block .menu-item-has-children .toggle-static-child-menu,\n                                #site-footer .custom-menu-block .menu-item-has-children .toggle-static-child-menu,\n                                .off-canvas-nav .menu-item-has-children.no-link .menu-title-has-children",this.toggleChildren),$(document).on("mouseover","#site-header .dynamic-menu-item.has-children",this.loadDynamicNodeChildren)},loadDynamicNodeChildren:function(e){var a=sw.menu.getMenuItem(this);a.data("loaded")||(a.data("loaded",!0).addClass("menu-item-has-loading-children"),sw.ajaxRequest("GET",sw.getShopUrl("/menu/"+a.data("id")+"/"+a.data("level")+"/get-dynamic-category-tree-tmpl"),{expectResponse:!0,onSuccess:function(e){var n=$("#nodesPartialTmpl").html(),i=$("#menuTreeTmpl").mustache(e,{nodesPartial:n}),t=$("<ul>").addClass("menu menu-level-"+(a.data("level")+1)).html(i);if(a.find("> ul").length){var l=a.find("> ul");t.find("> li").each(function(e,n){l.append(n)}),a.addClass("menu-item-has-children-loaded menu-item-show-children").removeClass("menu-item-has-loading-children")}else a.append(t)}}))},preventLinkClick:function(e){e.preventDefault()},toggleChildren:function(e){$(e.target).closest("li").toggleClass("menu-item-show-children")},getMenuItem:function(e){return"li"!=$(e)[0].nodeName.toLowerCase()?$(e).closest("li"):$(e)}},$(document).ready($.proxy(sw.menu.init,sw.menu));